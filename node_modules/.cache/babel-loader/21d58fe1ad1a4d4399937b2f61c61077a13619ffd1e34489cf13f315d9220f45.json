{"ast":null,"code":"import React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import AuthService from\"../services/auth.service\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const LoginComponent=_ref=>{let{currentUser,setCurrentUser}=_ref;const nagivate=useNavigate();let[email,setEmail]=useState(\"\");let[password,setPassword]=useState(\"\");let[message,setMessage]=useState(\"\");const handleEmail=e=>{setEmail(e.target.value);};const handlePassword=e=>{setPassword(e.target.value);};const handleLogin=async()=>{try{let response=await AuthService.login(email,password);localStorage.setItem(\"user\",JSON.stringify(response.data));//儲存本地資料\nwindow.alert(\"登入成功。您現在將被重新導向到個人資料頁面。\");setCurrentUser(AuthService.getCurrentUser());nagivate(\"/profile\");//跳轉頁面\n}catch(e){setMessage(e.response.data);}};return/*#__PURE__*/_jsx(\"div\",{style:{padding:\"3rem\"},className:\"col-md-12\",children:/*#__PURE__*/_jsxs(\"div\",{children:[message&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:message}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"\\u96FB\\u5B50\\u4FE1\\u7BB1\\uFF1A\"}),/*#__PURE__*/_jsx(\"input\",{onChange:handleEmail,type:\"text\",className:\"form-control\",name:\"email\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"\\u5BC6\\u78BC\\uFF1A\"}),/*#__PURE__*/_jsx(\"input\",{onChange:handlePassword,type:\"password\",className:\"form-control\",name:\"password\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleLogin,className:\"btn btn-primary btn-block\",children:/*#__PURE__*/_jsx(\"span\",{children:\"\\u767B\\u5165\\u7CFB\\u7D71\"})})})]})});};export default LoginComponent;","map":{"version":3,"names":["React","useState","useNavigate","AuthService","jsx","_jsx","jsxs","_jsxs","LoginComponent","_ref","currentUser","setCurrentUser","nagivate","email","setEmail","password","setPassword","message","setMessage","handleEmail","e","target","value","handlePassword","handleLogin","response","login","localStorage","setItem","JSON","stringify","data","window","alert","getCurrentUser","style","padding","className","children","htmlFor","onChange","type","name","onClick"],"sources":["D:/Fork/ReactProject/client/src/components/login-component.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport AuthService from \"../services/auth.service\";\r\n\r\nconst LoginComponent = ({ currentUser, setCurrentUser }) => {\r\n  const nagivate = useNavigate();\r\n  let [email, setEmail] = useState(\"\");\r\n  let [password, setPassword] = useState(\"\");\r\n  let [message, setMessage] = useState(\"\");\r\n\r\n  const handleEmail = (e) => {\r\n    setEmail(e.target.value);\r\n  };\r\n  const handlePassword = (e) => {\r\n    setPassword(e.target.value);\r\n  };\r\n\r\n  const handleLogin = async () => {\r\n    try {\r\n      let response = await AuthService.login(email, password);\r\n      localStorage.setItem(\"user\", JSON.stringify(response.data));//儲存本地資料\r\n      window.alert(\"登入成功。您現在將被重新導向到個人資料頁面。\");\r\n      setCurrentUser(AuthService.getCurrentUser());\r\n      nagivate(\"/profile\");//跳轉頁面\r\n    } catch (e) {\r\n      setMessage(e.response.data);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: \"3rem\" }} className=\"col-md-12\">\r\n      <div>\r\n        {message && <div className=\"alert alert-danger\">{message}</div>}\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"username\">電子信箱：</label>\r\n          <input\r\n            onChange={handleEmail}\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            name=\"email\"\r\n          />\r\n        </div>\r\n        <br />\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"password\">密碼：</label>\r\n          <input\r\n            onChange={handlePassword}\r\n            type=\"password\"\r\n            className=\"form-control\"\r\n            name=\"password\"\r\n          />\r\n        </div>\r\n        <br />\r\n        <div className=\"form-group\">\r\n          <button onClick={handleLogin} className=\"btn btn-primary btn-block\">\r\n            <span>登入系統</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginComponent;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}