{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import CourseService from\"../services/course.service\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const CourseComponent=_ref=>{let{currentUser,setCurrentUser}=_ref;const navigate=useNavigate();const handleTakeToLogin=()=>{navigate(\"/login\");};const[courseData,setCourseData]=useState(null);useEffect(()=>{let _id;if(currentUser){_id=currentUser.user._id;//如果有登入紀錄資料時\nif(currentUser.user.role==\"instructor\"){//如果是教師\nCourseService.get(_id)//從service的get方法拿教師的資料\n.then(data=>{setCourseData(data.data);}).catch(e=>{console.log(e);});}else if(currentUser.user.role==\"student\"){CourseService.getEnrolledCourses(_id).then(data=>{console.log(data);setCourseData(data.data);}).catch(e=>{console.log(e);});}}},[]);return/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"3rem\"},children:[!currentUser&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u60A8\\u5FC5\\u9808\\u5148\\u767B\\u5165\\u624D\\u80FD\\u770B\\u5230\\u8AB2\\u7A0B\\u3002\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary btn-lg\",onClick:handleTakeToLogin,children:\"\\u56DE\\u5230\\u767B\\u5165\\u9801\\u9762\"})]}),currentUser&&currentUser.user.role==\"instructor\"&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h1\",{children:\"\\u6B61\\u8FCE\\u4F86\\u5230\\u8B1B\\u5E2B\\u7684\\u8AB2\\u7A0B\\u9801\\u9762\\u3002\"})}),currentUser&&currentUser.user.role==\"student\"&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h1\",{children:\"\\u6B61\\u8FCE\\u4F86\\u5230\\u5B78\\u751F\\u7684\\u8AB2\\u7A0B\\u9801\\u9762\\u3002\"})}),currentUser&&courseData&&courseData.length!=0&&/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",flexWrap:\"wrap\"},children:courseData.map(course=>{return/*#__PURE__*/_jsx(\"div\",{className:\"card\",style:{width:\"18rem\",margin:\"1rem\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"card-title\",children:[\"\\u8AB2\\u7A0B\\u540D\\u7A31:\",course.title]}),/*#__PURE__*/_jsxs(\"p\",{style:{margin:\"0.5rem 0rem\"},className:\"card-text\",children:[\"\\u8A73\\u7D30\\u8AAA\\u660E : \",course.description]}),/*#__PURE__*/_jsxs(\"p\",{style:{margin:\"0.5rem 0rem\"},children:[\"\\u5B78\\u751F\\u4EBA\\u6578: \",course.students.length]}),/*#__PURE__*/_jsxs(\"p\",{style:{margin:\"0.5rem 0rem\"},children:[\"\\u8AB2\\u7A0B\\u50F9\\u683C: \",course.price]})]})});})})]});};export default CourseComponent;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","CourseService","jsx","_jsx","jsxs","_jsxs","CourseComponent","_ref","currentUser","setCurrentUser","navigate","handleTakeToLogin","courseData","setCourseData","_id","user","role","get","then","data","catch","e","console","log","getEnrolledCourses","style","padding","children","className","onClick","length","display","flexWrap","map","course","width","margin","title","description","students","price"],"sources":["D:/Fork/ReactProject/client/src/components/course-component.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport CourseService from \"../services/course.service\";\r\n\r\nconst CourseComponent = ({ currentUser, setCurrentUser }) => {\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const handleTakeToLogin = () => {\r\n    navigate(\"/login\");\r\n  };\r\n\r\n  const [courseData, setCourseData] = useState(null);\r\n\r\n  useEffect(() => {\r\n    let _id;\r\n    if (currentUser) {\r\n      _id = currentUser.user._id;//如果有登入紀錄資料時\r\n      if (currentUser.user.role == \"instructor\") {//如果是教師\r\n        CourseService.get(_id)//從service的get方法拿教師的資料\r\n          .then((data) => {\r\n            setCourseData(data.data);\r\n          })\r\n          .catch((e) => {\r\n            console.log(e);\r\n          });\r\n      } else if (currentUser.user.role == \"student\") {\r\n        CourseService.getEnrolledCourses(_id)\r\n          .then((data) => {\r\n            console.log(data);\r\n            setCourseData(data.data);\r\n          })\r\n          .catch((e) => {\r\n            console.log(e);\r\n          });\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div style={{ padding: \"3rem\" }}>\r\n      {!currentUser && (\r\n        <div>\r\n          <p>您必須先登入才能看到課程。</p>\r\n          <button\r\n            className=\"btn btn-primary btn-lg\"\r\n            onClick={handleTakeToLogin}\r\n          >\r\n            回到登入頁面\r\n          </button>\r\n        </div>\r\n      )}\r\n      {currentUser && currentUser.user.role == \"instructor\" && (\r\n        <div>\r\n          <h1>歡迎來到講師的課程頁面。</h1>\r\n        </div>\r\n      )}\r\n      {currentUser && currentUser.user.role == \"student\" && (\r\n        <div>\r\n          <h1>歡迎來到學生的課程頁面。</h1>\r\n        </div>\r\n      )}\r\n      \r\n      {currentUser && courseData && courseData.length != 0 && (\r\n        <div style={{ display: \"flex\", flexWrap: \"wrap\" }}>\r\n          {courseData.map((course) => {\r\n            return (\r\n              <div className=\"card\" style={{ width: \"18rem\", margin: \"1rem\" }}>\r\n                <div className=\"card-body\">\r\n                  <h5 className=\"card-title\">課程名稱:{course.title}</h5>\r\n                  <p style={{ margin: \"0.5rem 0rem\" }} className=\"card-text\">\r\n                    詳細說明 : {course.description}\r\n                  </p>\r\n                  <p style={{ margin: \"0.5rem 0rem\" }}>\r\n                    學生人數: {course.students.length}\r\n                  </p>\r\n                  <p style={{ margin: \"0.5rem 0rem\" }}>\r\n                    課程價格: {course.price}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CourseComponent;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,CAAAC,aAAa,KAAM,4BAA4B,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEvD,KAAM,CAAAC,eAAe,CAAGC,IAAA,EAAqC,IAApC,CAAEC,WAAW,CAAEC,cAAe,CAAC,CAAAF,IAAA,CAEtD,KAAM,CAAAG,QAAQ,CAAGV,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAW,iBAAiB,CAAGA,CAAA,GAAM,CAC9BD,QAAQ,CAAC,QAAQ,CAAC,CACpB,CAAC,CAED,KAAM,CAACE,UAAU,CAAEC,aAAa,CAAC,CAAGf,QAAQ,CAAC,IAAI,CAAC,CAElDC,SAAS,CAAC,IAAM,CACd,GAAI,CAAAe,GAAG,CACP,GAAIN,WAAW,CAAE,CACfM,GAAG,CAAGN,WAAW,CAACO,IAAI,CAACD,GAAG,CAAC;AAC3B,GAAIN,WAAW,CAACO,IAAI,CAACC,IAAI,EAAI,YAAY,CAAE,CAAC;AAC1Cf,aAAa,CAACgB,GAAG,CAACH,GAAG,CAAC;AAAA,CACnBI,IAAI,CAAEC,IAAI,EAAK,CACdN,aAAa,CAACM,IAAI,CAACA,IAAI,CAAC,CAC1B,CAAC,CAAC,CACDC,KAAK,CAAEC,CAAC,EAAK,CACZC,OAAO,CAACC,GAAG,CAACF,CAAC,CAAC,CAChB,CAAC,CAAC,CACN,CAAC,IAAM,IAAIb,WAAW,CAACO,IAAI,CAACC,IAAI,EAAI,SAAS,CAAE,CAC7Cf,aAAa,CAACuB,kBAAkB,CAACV,GAAG,CAAC,CAClCI,IAAI,CAAEC,IAAI,EAAK,CACdG,OAAO,CAACC,GAAG,CAACJ,IAAI,CAAC,CACjBN,aAAa,CAACM,IAAI,CAACA,IAAI,CAAC,CAC1B,CAAC,CAAC,CACDC,KAAK,CAAEC,CAAC,EAAK,CACZC,OAAO,CAACC,GAAG,CAACF,CAAC,CAAC,CAChB,CAAC,CAAC,CACN,CACF,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,mBACEhB,KAAA,QAAKoB,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAO,CAAE,CAAAC,QAAA,EAC7B,CAACnB,WAAW,eACXH,KAAA,QAAAsB,QAAA,eACExB,IAAA,MAAAwB,QAAA,CAAG,gFAAa,CAAG,CAAC,cACpBxB,IAAA,WACEyB,SAAS,CAAC,wBAAwB,CAClCC,OAAO,CAAElB,iBAAkB,CAAAgB,QAAA,CAC5B,sCAED,CAAQ,CAAC,EACN,CACN,CACAnB,WAAW,EAAIA,WAAW,CAACO,IAAI,CAACC,IAAI,EAAI,YAAY,eACnDb,IAAA,QAAAwB,QAAA,cACExB,IAAA,OAAAwB,QAAA,CAAI,0EAAY,CAAI,CAAC,CAClB,CACN,CACAnB,WAAW,EAAIA,WAAW,CAACO,IAAI,CAACC,IAAI,EAAI,SAAS,eAChDb,IAAA,QAAAwB,QAAA,cACExB,IAAA,OAAAwB,QAAA,CAAI,0EAAY,CAAI,CAAC,CAClB,CACN,CAEAnB,WAAW,EAAII,UAAU,EAAIA,UAAU,CAACkB,MAAM,EAAI,CAAC,eAClD3B,IAAA,QAAKsB,KAAK,CAAE,CAAEM,OAAO,CAAE,MAAM,CAAEC,QAAQ,CAAE,MAAO,CAAE,CAAAL,QAAA,CAC/Cf,UAAU,CAACqB,GAAG,CAAEC,MAAM,EAAK,CAC1B,mBACE/B,IAAA,QAAKyB,SAAS,CAAC,MAAM,CAACH,KAAK,CAAE,CAAEU,KAAK,CAAE,OAAO,CAAEC,MAAM,CAAE,MAAO,CAAE,CAAAT,QAAA,cAC9DtB,KAAA,QAAKuB,SAAS,CAAC,WAAW,CAAAD,QAAA,eACxBtB,KAAA,OAAIuB,SAAS,CAAC,YAAY,CAAAD,QAAA,EAAC,2BAAK,CAACO,MAAM,CAACG,KAAK,EAAK,CAAC,cACnDhC,KAAA,MAAGoB,KAAK,CAAE,CAAEW,MAAM,CAAE,aAAc,CAAE,CAACR,SAAS,CAAC,WAAW,CAAAD,QAAA,EAAC,6BAClD,CAACO,MAAM,CAACI,WAAW,EACzB,CAAC,cACJjC,KAAA,MAAGoB,KAAK,CAAE,CAAEW,MAAM,CAAE,aAAc,CAAE,CAAAT,QAAA,EAAC,4BAC7B,CAACO,MAAM,CAACK,QAAQ,CAACT,MAAM,EAC5B,CAAC,cACJzB,KAAA,MAAGoB,KAAK,CAAE,CAAEW,MAAM,CAAE,aAAc,CAAE,CAAAT,QAAA,EAAC,4BAC7B,CAACO,MAAM,CAACM,KAAK,EAClB,CAAC,EACD,CAAC,CACH,CAAC,CAEV,CAAC,CAAC,CACC,CACN,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAAlC,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}