{"ast":null,"code":"import React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import CourseService from\"../services/course.service\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const PostCourseComponent=props=>{let{currentUser,setCurrentUser}=props;let[title,setTitle]=useState(\"\");let[description,setDescription]=useState(\"\");let[price,setPrice]=useState(0);let[message,setMessage]=useState(\"\");const navigate=useNavigate();const handleTakeToLogin=()=>{navigate(\"/login\");};const handleChangeTitle=e=>{setTitle(e.target.value);};const handleChangeDesciption=e=>{setDescription(e.target.value);};const handleChangePrice=e=>{setPrice(e.target.value);};const postCourse=()=>{CourseService.post(title,description,price).then(()=>{window.alert(\"新課程已創建成功\");navigate(\"/course\");}).catch(error=>{console.log(error.response);setMessage(error.response.data);});};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"3rem\"},children:[!currentUser&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u5728\\u767C\\u5E03\\u65B0\\u8AB2\\u7A0B\\u4E4B\\u524D\\uFF0C\\u60A8\\u5FC5\\u9808\\u5148\\u767B\\u9304\\u3002\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary btn-lg\",onClick:handleTakeToLogin,children:\"\\u5E36\\u6211\\u9032\\u5165\\u767B\\u9304\\u9801\\u9762\\u3002\"})]}),currentUser&&currentUser.user.role!==\"instructor\"&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u53EA\\u6709\\u8B1B\\u5E2B\\u53EF\\u4EE5\\u767C\\u5E03\\u65B0\\u8AB2\\u7A0B\\u3002\"})}),currentUser&&currentUser.user.role==\"instructor\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"exampleforTitle\",children:\"\\u8AB2\\u7A0B\\u6A19\\u984C\\uFF1A\"}),/*#__PURE__*/_jsx(\"input\",{name:\"title\",type:\"text\",className:\"form-control\",id:\"exampleforTitle\",onChange:handleChangeTitle}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{for:\"exampleforContent\",children:\"\\u5167\\u5BB9\\uFF1A\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",id:\"exampleforContent\",\"aria-describedby\":\"emailHelp\",name:\"content\",onChange:handleChangeDesciption}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{for:\"exampleforPrice\",children:\"\\u50F9\\u683C\\uFF1A\"}),/*#__PURE__*/_jsx(\"input\",{name:\"price\",type:\"number\",className:\"form-control\",id:\"exampleforPrice\",onChange:handleChangePrice}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:postCourse,children:\"\\u4EA4\\u51FA\\u8868\\u55AE\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-warning\",role:\"alert\",children:message})]})]});};export default PostCourseComponent;","map":{"version":3,"names":["React","useState","useNavigate","CourseService","jsx","_jsx","jsxs","_jsxs","PostCourseComponent","props","currentUser","setCurrentUser","title","setTitle","description","setDescription","price","setPrice","message","setMessage","navigate","handleTakeToLogin","handleChangeTitle","e","target","value","handleChangeDesciption","handleChangePrice","postCourse","post","then","window","alert","catch","error","console","log","response","data","style","padding","children","className","onClick","user","role","for","name","type","id","onChange"],"sources":["D:/Fork/ReactProject/client/src/components/postCourse-component.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport CourseService from \"../services/course.service\";\r\n\r\nconst PostCourseComponent = (props) => {\r\n  let { currentUser, setCurrentUser } = props;\r\n  let [title, setTitle] = useState(\"\");\r\n  let [description, setDescription] = useState(\"\");\r\n  let [price, setPrice] = useState(0);\r\n  let [message, setMessage] = useState(\"\");\r\n  const navigate = useNavigate();\r\n  const handleTakeToLogin = () => {\r\n    navigate(\"/login\");\r\n  };\r\n  const handleChangeTitle = (e) => {\r\n    setTitle(e.target.value);\r\n  };\r\n  const handleChangeDesciption = (e) => {\r\n    setDescription(e.target.value);\r\n  };\r\n  const handleChangePrice = (e) => {\r\n    setPrice(e.target.value);\r\n  };\r\n  const postCourse = () => {\r\n    CourseService.post(title, description, price)\r\n      .then(() => {\r\n        window.alert(\"新課程已創建成功\");\r\n        navigate(\"/course\");\r\n      })\r\n      .catch((error) => {\r\n        console.log(error.response);\r\n        setMessage(error.response.data);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: \"3rem\" }}>\r\n      {!currentUser && (\r\n        <div>\r\n          <p>在發布新課程之前，您必須先登錄。</p>\r\n          <button\r\n            className=\"btn btn-primary btn-lg\"\r\n            onClick={handleTakeToLogin}\r\n          >\r\n            帶我進入登錄頁面。\r\n          </button>\r\n        </div>\r\n      )}\r\n      {currentUser && currentUser.user.role !== \"instructor\" && (\r\n        <div>\r\n          <p>只有講師可以發布新課程。</p>\r\n        </div>\r\n      )}\r\n      {currentUser && currentUser.user.role == \"instructor\" && (\r\n        <div className=\"form-group\">\r\n          <label for=\"exampleforTitle\">課程標題：</label>\r\n          <input\r\n            name=\"title\"\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            id=\"exampleforTitle\"\r\n            onChange={handleChangeTitle}\r\n          />\r\n          <br />\r\n          <label for=\"exampleforContent\">內容：</label>\r\n          <textarea\r\n            className=\"form-control\"\r\n            id=\"exampleforContent\"\r\n            aria-describedby=\"emailHelp\"\r\n            name=\"content\"\r\n            onChange={handleChangeDesciption}\r\n          />\r\n          <br />\r\n          <label for=\"exampleforPrice\">價格：</label>\r\n          <input\r\n            name=\"price\"\r\n            type=\"number\"\r\n            className=\"form-control\"\r\n            id=\"exampleforPrice\"\r\n            onChange={handleChangePrice}\r\n          />\r\n          <br />\r\n          <button className=\"btn btn-primary\" onClick={postCourse}>\r\n            交出表單\r\n          </button>\r\n          <br />\r\n          <br />\r\n          {message && (\r\n            <div className=\"alert alert-warning\" role=\"alert\">\r\n              {message}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PostCourseComponent;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}